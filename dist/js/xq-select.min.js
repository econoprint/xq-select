;(function($){$.searchField=function(el,options){var defaults={minCharacter:3,deferRequestBy:500,search:function(search){},clear:function(){}};var keys={ESC:27,TAB:9,RETURN:13,LEFT:37,UP:38,RIGHT:39,DOWN:40};var sf=this;var $input=$(el);sf.settings={};sf.init=function(){sf.settings=$.extend({},defaults,options);sf.currentValue=$input.val();sf.onChangeInterval={};var attr={autocomplete:'off',spellcheck:'false',autocorrect:'off',autocapitalize:'off'};$input.attr(attr);$input.on('keyup',function(e){sf.onKeyUp(e);}).on('keydown',function(e){sf.onKeyDown(e);}).on('blur',function(){if(sf.currentValue!==$input.val()){sf.doCallback();}}).on('change',function(){if(sf.currentValue!==$input.val()){sf.doCallback();}});};sf.onKeyDown=function(e){var keyPressed=e.which;switch(keyPressed){case keys.ESC:$input.val('').trigger('change');return;case keys.TAB:if(sf.currentValue!==$input.val()){sf.doCallback();}
return;case keys.RETURN:if(sf.currentValue!==$input.val()){sf.doCallback();}
break;default:return;}
e.stopImmediatePropagation();e.preventDefault();};sf.onKeyUp=function(e){var keyPressed=e.which;if(sf.isSpecialKey(keyPressed)){return;}
clearInterval(sf.onChangeInterval);if(sf.currentValue!==$input.val()){if(sf.settings.deferRequestBy>0){sf.onChangeInterval=setInterval(function(){sf.doCallback();},sf.settings.deferRequestBy);}else{sf.doCallback();}}};sf.isSpecialKey=function(keyPressed){var retval=false;$.each(keys,function(key,value){retval=retval||(value===keyPressed);});return retval;};sf.doCallback=function(){clearInterval(sf.onChangeInterval);sf.currentValue=$input.val();if(sf.currentValue.length>=sf.settings.minCharacter){clearInterval(sf.onChangeInterval);sf.settings.search(sf.currentValue);}else if(sf.currentValue.length===0){sf.settings.clear();}};sf.init();};$.fn.searchField=function(options){return this.each(function(){if(undefined===$(this).data('search-field')){var sf=new $.searchField(this,options);$(this).data('search-field',sf);}});}})(jQuery);
jQuery.fn.extend({domSearch:function(sel,value,callback){var ds=this;ds.value=value;ds.settings={minCharacter:2};ds.hasSearch=function(elem){var retval=false;$(elem).contents().each(function(){var text=ds.getText(this);if(text&&text.indexOf(ds.value.toLowerCase())>=0){retval=true;}});return retval;};ds.getText=function(elem){var text=(elem.textContent||elem.innerText||$(elem).text()||"").toLowerCase();return(text.length>=ds.settings.minCharacter)?text:null;};$(sel).each(function(){callback(this,ds.hasSearch(this));});}});
/*!
 * xqSelect v4.0.1 (https://github.com/exactquery/xq-select)
 * @author  AMJones [am@jonesiscoding.com]
 * @licence MIT (https://github.com/exactquery/xq-select/blob/master/LICENSE)
 */;(function($){$.xqselect=function(el,options){var defaults={api:['mobile','filter','characters'],cls:{wrapper:'xq-select-wrapper',dropdown:'dropdown-menu',toggle:'dropdown-toggle',option:'xq-select-item',show:'show'},attr:{dropdown:{'role':'menu'},toggle:{'type':'button','data-toggle':'dropdown','aria-haspopup':'true','aria-expanded':'false'}},fauxOptionDefault:'--',mobile:false,characters:2};var plugin=this;plugin.settings={};plugin.sel={};var init=function(){plugin.$el=$(el);plugin.settings=$.extend({},defaults,options);$.each(plugin.settings.api,function(k,v){var data=plugin.$el.data(v);plugin.settings[v]=data||plugin.settings[v]||null;});$.each(plugin.settings.cls,function(key,val){plugin.sel[key]='.'+val;});var use=(plugin.$el.attr('data-native')!=='true')&&!(plugin.$el.prop('disabled')||plugin.$el.prop('readonly'))&&(!isMobile()||plugin.$el.attr('data-mobile')==='true');if(use){render();plugin.$el.on('xq.select.refresh',function(e){render();});}};plugin.onClick=function(obj){var $obj=$(obj);var $target=$($obj.attr('data-target'));var $dropdown=$obj.parents(plugin.sel.dropdown);if(!$obj.hasClass('disabled')){$target.val($obj.attr('data-value'));$dropdown.find(plugin.sel.option).removeClass('selected');$obj.addClass('selected');$target.trigger('change');}
$dropdown.prev(plugin.sel.toggle).focus();};plugin.onKeyDown=function(e,obj){if(e.which===13){e.preventDefault();$(obj).click();}else if(e.which===40){plugin.$el.closest(plugin.sel.wrapper).find('.dropdown-item:not(.xq-filtered)').focus();}else{plugin.$el.siblings('.xq-filter').first().focus();}};plugin.onClose=function(e,obj){var $dd=$(e.target);if(plugin.settings.filter){$dd.find('.xq-filtered').removeClass('xq-filtered');$dd.closest(plugin.sel.wrapper).find('.xq-filter').val('');}};plugin.onOpen=function(e,obj){$(obj).find(plugin.sel.option+'.selected').focus();};plugin.closeDropDown=function(obj){$(obj).parent(plugin.sel.wrapper).removeClass(plugin.settings.cls.show);$(obj).prev(plugin.sel.toggle).attr('aria-expanded',false);};var render=function(){var $wrapper=createWrapper();$wrapper.append($('<button>&nbsp;</button>').attr($.extend({},plugin.settings.attr.toggle,{'tabindex':plugin.$el.attr('tabindex')||0})).addClass(plugin.settings.cls.toggle)).append(addOptions($('<div></div>').attr(plugin.settings.attr.dropdown).addClass(plugin.settings.cls.dropdown)));if(plugin.settings.filter){var $sb=$('<input type="text" class="xq-filter" tabindex="-1" placeholder="Type to Filter" />');var $dd=plugin.$el.parent(plugin.sel.wrapper).find(plugin.sel.dropdown);$sb.searchField({search:function(q){$.fn.domSearch($dd.find('.dropdown-item'),q,function(el,has){$(el).toggleClass('xq-filtered',!has);})},clear:function(){$dd.find('.dropdown-item').removeClass('xq-filtered');},minCharacter:plugin.settings.characters});$wrapper.append($sb);}};var addOptions=function($dropdown){var target='#'+getElId();plugin.$el.children().each(function(){var $opt=$(this);if($opt.prop('tagName')==='OPTION'){$dropdown.append(createOption($opt,target));}else if($opt.prop('tagName')==='OPTGROUP'){$dropdown.append(createOptGroup($opt));$opt.children().each(function(){$dropdown.append(createOption($(this),target));});}});$dropdown.find('a').eq(plugin.$el.prop('selectedIndex')).addClass('selected');return $dropdown;};var createOption=function($optObj,target){var index=$optObj.index(target+' option');var $ddLink=$('<a tabindex="'+index+'"></a>');var css=($optObj.attr('disabled'))?plugin.settings.cls.option+' dropdown-item disabled':plugin.settings.cls.option+' dropdown-item';$ddLink.html(getOptionText($optObj));$ddLink.attr('data-value',$optObj.val()).attr('data-target',target).attr('data-index',index).addClass(css);var subText=$optObj.attr('data-subtext')||null;if(subText){$ddLink.append($('<span></span>').text(subText));if($optObj.text().length<subText.length){$optObj.attr('data-original-text',$optObj.text());$optObj.append(' <span>('+subText+')</span>');}}
return $ddLink;};var createOptGroup=function($grpObj){return $('<div></div>').addClass('optgroup').text($grpObj.attr('label')||plugin.settings.fauxOptionDefault);};var getElId=function(){var id=plugin.$el.prop('id')||null;if(!id){id='xqSelect_'+Math.random().toString(36).substr(2,9);plugin.$el.prop('id',id);}
return id;};var getOptionText=function($optObj){var ddText=$optObj.attr('data-original-text')||$optObj.text()||plugin.settings.fauxOptionDefault;if(ddText===plugin.settings.fauxOptionDefault){$optObj.html(ddText);}
return ddText;};var createWrapper=function(){var $wrapper=plugin.$el.parents(plugin.sel.wrapper);$wrapper.find(plugin.sel.dropdown).remove();$wrapper.find(plugin.sel.toggle).remove();return $wrapper.off().on('shown.bs.dropdown',function(e){plugin.onOpen(e,this);}).on('hidden.bs.dropdown',function(e){plugin.onClose(e,this);}).on('keydown',plugin.sel.dropdown,function(e){if(e.which===9){plugin.closeDropDown(this);}}).on('keydown',plugin.sel.option,function(e){plugin.onKeyDown(e,this);}).on('keydown','.xq-filter',function(e){plugin.onKeyDown(e,this);}).on('click',plugin.sel.option,function(){plugin.onClick(this);});};var isMobile=function(){return true===(/(android|blackberry|bb10|mobile|iphone|ipad|ipod|opera mini|iemobile|windows phone)/i.test(navigator.userAgent));};init();};$.fn.xqselect=function(options){return this.each(function(){if(undefined===$(this).data('xqselect')){var plugin=new $.xqselect(this,options);$(this).data('xqselect',plugin);}});}})(jQuery);$(document).ready(function(){$('.xq-select').xqselect();});