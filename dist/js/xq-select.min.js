/**
 * xqSelect v1.00.04 (https://github.com/exactquery/xq-select)
 * @author  Aaron M Jones [aaron@jonesiscoding.com]
 * @licence MIT (https://github.com/exactquery/xq-select/blob/master/LICENSE)
 */
$(document).ready(function(){$(".xq-select > select").xqselect()}),function(t){t.fn.xqselect=function(e){var n=this;return n.init=function(a){n.options=t.extend({},t.fn.xqselect.defaultOptions,e),n.$all=t(a),n.$all.length<=n.options.fauxLimit&&n.$all.each(function(t){n.RenderSelect(this,t)})},n.RenderSelect=function(e,a){var o=t(e),i=o.parents(n.options.wrapper);if("true"!=i.attr("data-native")&&!n.isMobile()&&"true"!=i.attr("data-mobile")){var d=t(n.options.templateFauxSelect),r=t(n.options.templateFauxButton),p="undefined"!=typeof o.attr("tabindex")?o.attr("tabindex"):0,l=o.prop("id");"undefined"==typeof l&&(l="xqSelect"+a,o.attr("id",l)),i.off(),i.find(".xq-select-dropdown").remove(),i.find("button").remove();var s=o.children();s.each(function(){var e=t(this);if("OPTION"==e.prop("tagName")){var a=n.CreateOption(e,l);d.append(a)}else if("OPTGROUP"==e.prop("tagName")){var o=n.CreateOptGroup(e);d.append(o);var i=e.children();i.each(function(){var e=n.CreateOption(t(this),l);d.append(e)})}}),r.attr("tabindex",p),o.addClass("xq-select-enabled").attr("tabindex","-1"),i.on("shown.bs.dropdown",function(){n.onOpen(this)}),i.on("keydown",".xq-select-dropdown",function(t){9==t.which&&n.closeDropDown(this)}),i.on("keydown",".xq-select-item",function(t){n.onKeyDown(t,this)}),i.on("click",".xq-select-item",function(){n.onClick(this)}),i.append(r),i.append(d)}},n.CreateOptGroup=function(e){var n=e.attr("label"),a=t("<li></li>");return a.addClass("optgroup"),a.text(n),a},n.CreateOption=function(e,n){var a=e.index("#"+n+" option"),o=t('<a tabindex="'+a+'"></a>'),i=t("<li></li>"),d=e.text()||"&nbsp;";o.text(d),o.attr("data-value",e.val()),o.attr("data-target","#"+n),o.attr("data-index",a),o.addClass("xq-select-item"),e.prop("selected")&&o.addClass("selected"),e.attr("disabled")&&o.addClass("disabled"),"undefined"!=typeof e.attr("data-original-text")&&o.text(e.attr("data-original-text"));var r=e.attr("data-subtext");if("undefined"!=typeof r){var p=t("<span></span>");p.text(r),o.append(p),e.text().length<r.length&&(e.attr("data-original-text",e.text()),e.append(" <span>("+r+")</span>"))}return i.append(o),i},n.onClick=function(e){var a=t(e).attr("data-target");t(e).hasClass("disabled")||(t(a).val(t(e).attr("data-value")),t(n.options.fauxOption).removeClass("selected"),t(e).addClass("selected"),t(a).trigger("change")),t(e).parents(".xq-select-dropdown").prev(".dropdown-toggle").focus()},n.onKeyDown=function(e,n){var a=e.which;13==a&&(e.preventDefault(),t(n).click())},n.onOpen=function(e){t(e).find(".xq-select-item.selected").focus()},n.closeDropDown=function(e){t(e).parent(n.options.wrapper).removeClass("open"),t(e).prev(".dropdown-toggle").attr("aria-expanded",!1)},n.isMobile=function(){return!0===/(android|blackberry|bb10|mobile|iphone|ipad|ipod|opera mini|iemobile|windows phone)/i.test(navigator.userAgent)},n.init(this),n},t.fn.xqselect.defaultOptions={fauxOption:".xq-select-item",trigger:".xq-select > select",wrapper:".xq-select",templateFauxSelect:'<ul class="dropdown-menu xq-select-dropdown" role="menu"></ul>',templateFauxButton:'<button type="button" class="btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">&nbsp;</button>',fauxLimit:20}}(jQuery),$(document).on("shown.bs.dropdown",".xq-select",function(){var t=$(this),e=t.children(".dropdown-menu"),n=t.children(".dropdown-toggle"),a=e.offset(),o=a.top-n.height()-e.height()-$(window).scrollTop(),i=$(window).scrollTop()+$(window).height()-(a.top+e.height());0>i&&(o>=0||o>i)&&t.addClass("dropup")}).on("hidden.bs.dropdown",".dropdown",function(){$(this).removeClass("dropup")});